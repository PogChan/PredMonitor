services:
  dashboard:
    build: .
    command: python app.py
    env_file: .env
    ports:
      - "8050:8050"
    environment:
      DASH_HOST: 0.0.0.0
      DASH_PORT: 8050
      DASH_FEED_MODE: db
      DASH_DEBUG: "true"
      DASH_HOT_RELOAD: "true"
      DASH_HOT_RELOAD_INTERVAL: "1000"
      TRADE_DB_PATH: data/trades.db
    volumes:
      - .:/app
    restart: unless-stopped
  ingest:
    build: .
    command: python -m ingest.ingest_flow
    env_file: .env
    environment:
      ENABLE_POLYMARKET: "true"
      ENABLE_KALSHI: "true"
      TRADE_DB_PATH: data/trades.db
      PERSIST_TRADES: "true"
      KALSHI_WS_ENABLED: "true"
    volumes:
      - .:/app
    restart: unless-stopped
